---
# ============================================================================
# Cisco Catalyst Center Backup Deletion Configuration
# ============================================================================
#
# Usage:
#   ansible-playbook -i inventory/demo_lab/hosts.yml \
#     workflows/backup_and_restore/playbook/delete_backup_and_restore_playbook.yml \
#     --extra-vars VARS_FILE_PATH=../vars/delete_backup_and_restore_inputs.yml
#
# WARNING: All deletion operations are IRREVERSIBLE
# ============================================================================

# ============================================================================
# Deletion Behavior
# ============================================================================
# name only:
#   - Deletes specific backup with exact name
#
# name + backup_retention_days:
#   - Uses name as prefix filter
#   - Deletes matching backups older than specified days
#   - Example: name="DAILY_BACKUP", days=7 deletes all "DAILY_BACKUP_*" > 7 days
#
# backup_retention_days only:
#   - Deletes ALL backups older than specified days (no name filter)
#
# delete_all_backup: true
#   - Deletes ALL backups immediately (most destructive)


# ============================================================================
# Deletion Examples
# ============================================================================

# Delete specific backup by exact name
backup_restore_details:  
  - backup:
      - name: BACKUP1

# Delete backups by retention policy with name prefix
# Deletes all backups starting with "DAILY_BACKUP" older than 7 days
# backup_restore_details:
#   - backup:
#       - name: DAILY_BACKUP
#         backup_retention_days: 7

# # Delete all backups by retention policy (no name filter)
# # Deletes ALL backups older than 30 days
# backup_restore_details:
#   - backup:
#       - backup_retention_days: 30

# # Delete all backups (EXTREME CAUTION)
# # Deletes ALL backups from Catalyst Center
# backup_restore_details:
#   - backup:
#       - delete_all_backup: true

# # Delete weekly backups older than 14 days
# backup_restore_details:
#   - backup:
#       - name: WEEKLY_BACKUP
#         backup_retention_days: 14

# Delete NFS configuration
#backup_restore_details:
    nfs_configuration:
      - server_ip: 172.27.17.90
        source_path: /home/nfsshare/backups/TB23

# ============================================================================
# Notes
# ============================================================================
# - All deletion operations are IRREVERSIBLE
# - delete_all_backup takes precedence over other parameters
# - Always verify backup names before deletion
# - Test in non-production environment first
# - Consider creating new backup before deleting old ones